@{
    ViewData["Title"] = "Dashboard Doanh Nghi·ªáp - CI Research";
    Layout = null;
}

<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .container {
            padding: 2rem;
        }

        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            height: 400px;
        }

        .chart-title {
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #333;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
        }

        canvas {
            max-height: 320px !important;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-chart-bar"></i> Dashboard Doanh Nghi·ªáp</h1>
            <p class="mb-0">Ph√¢n t√≠ch d·ªØ li·ªáu doanh nghi·ªáp theo c√°c v√πng kinh t·∫ø</p>
        </div>

        <!-- Charts Grid -->
        <div class="row">
            <!-- Chart 1: C√°c V√πng Kinh T·∫ø -->
            <div class="col-md-6">
                <div class="chart-container">
                    <div class="chart-title">üìç Ph√¢n b·ªë DN theo V√πng Kinh T·∫ø</div>
                    <canvas id="economicZoneChart"></canvas>
                </div>
            </div>

            <!-- Chart 2: Quy m√¥ Doanh nghi·ªáp -->
            <div class="col-md-6">
                <div class="chart-container">
                    <div class="chart-title">üè¢ Ph√¢n b·ªë theo Quy m√¥ Doanh nghi·ªáp</div>
                    <canvas id="companySizeChart"></canvas>
                </div>
            </div>

            <!-- Chart 3: Xu h∆∞·ªõng doanh thu v√† l·ª£i nhu·∫≠n -->
            <div class="col-md-12">
                <div class="chart-container">
                    <div class="chart-title">üìà Xu h∆∞·ªõng Doanh thu v√† L·ª£i nhu·∫≠n theo nƒÉm</div>
                    <canvas id="revenueProfileChart"></canvas>
                </div>
            </div>

            <!-- Chart 4: Xu h∆∞·ªõng l·ª£i nhu·∫≠n -->
            <div class="col-md-6">
                <div class="chart-container">
                    <div class="chart-title">üí∞ Xu h∆∞·ªõng L·ª£i nhu·∫≠n theo nƒÉm</div>
                    <canvas id="profitChart"></canvas>
                </div>
            </div>

            <!-- Chart 5: Xu h∆∞·ªõng doanh thu -->
            <div class="col-md-6">
                <div class="chart-container">
                    <div class="chart-title">üíµ Xu h∆∞·ªõng Doanh thu theo nƒÉm</div>
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        console.log('üöÄ Initializing Dashboard Charts...');

        // Sample data for demonstration
        const sampleData = {
            economicZones: {
                labels: ['ƒê√¥ng Nam B·ªô', 'ƒê·ªìng b·∫±ng S√¥ng H·ªìng', 'Duy√™n h·∫£i Nam Trung B·ªô', 'B·∫Øc Trung B·ªô', 'ƒê·ªìng b·∫±ng S√¥ng C·ª≠u Long', 'T√¢y Nguy√™n', 'Trung du v√† Mi·ªÅn n√∫i B·∫Øc B·ªô'],
                data: [25, 20, 18, 15, 12, 7, 8]
            },
            companySize: {
                labels: ['Si√™u nh·ªè', 'Nh·ªè', 'V·ª´a', 'L·ªõn'],
                data: [45, 35, 15, 5]
            },
            years: [2020, 2021, 2022, 2023, 2024],
            revenue: [1200, 1450, 1680, 1920, 2180],
            profit: [180, 220, 290, 340, 420]
        };

        // Chart colors
        const colors = {
            primary: ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#06b6d4', '#6366f1', '#9ca3af'],
            secondary: ['#ef4444', '#f59e0b', '#10b981', '#3b82f6'],
            gradients: {
                revenue: 'rgba(59, 130, 246, 0.8)',
                profit: 'rgba(16, 185, 129, 0.8)'
            }
        };

        // 1. Economic Zones Chart
        function createEconomicZoneChart() {
            const ctx = document.getElementById('economicZoneChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: sampleData.economicZones.labels,
                    datasets: [{
                        data: sampleData.economicZones.data,
                        backgroundColor: colors.primary,
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                usePointStyle: true,
                                font: { size: 11 }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.raw / total) * 100).toFixed(1);
                                    return context.label + ': ' + context.raw + ' DN (' + percentage + '%)';
                                }
                            }
                        }
                    }
                }
            });
            console.log('‚úÖ Economic Zone chart created');
        }

        // 2. Company Size Chart
        function createCompanySizeChart() {
            const ctx = document.getElementById('companySizeChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: sampleData.companySize.labels,
                    datasets: [{
                        label: 'S·ªë doanh nghi·ªáp',
                        data: sampleData.companySize.data,
                        backgroundColor: colors.secondary,
                        borderColor: colors.secondary.map(c => c.replace('0.8', '1')),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.raw / total) * 100).toFixed(1);
                                    return context.label + ': ' + context.raw + ' DN (' + percentage + '%)';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'S·ªë l∆∞·ª£ng DN' }
                        },
                        x: {
                            title: { display: true, text: 'Quy m√¥ doanh nghi·ªáp' }
                        }
                    }
                }
            });
            console.log('‚úÖ Company Size chart created');
        }

        // 3. Revenue & Profit Trend Chart
        function createRevenueProfileChart() {
            const ctx = document.getElementById('revenueProfileChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sampleData.years,
                    datasets: [{
                        label: 'Doanh thu (t·ª∑ VNƒê)',
                        data: sampleData.revenue,
                        borderColor: colors.gradients.revenue,
                        backgroundColor: colors.gradients.revenue.replace('0.8', '0.1'),
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'L·ª£i nhu·∫≠n (t·ª∑ VNƒê)',
                        data: sampleData.profit,
                        borderColor: colors.gradients.profit,
                        backgroundColor: colors.gradients.profit.replace('0.8', '0.1'),
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Gi√° tr·ªã (t·ª∑ VNƒê)' }
                        },
                        x: {
                            title: { display: true, text: 'NƒÉm' }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
            console.log('‚úÖ Revenue & Profit chart created');
        }

        // 4. Profit Only Chart
        function createProfitChart() {
            const ctx = document.getElementById('profitChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: sampleData.years,
                    datasets: [{
                        label: 'L·ª£i nhu·∫≠n (t·ª∑ VNƒê)',
                        data: sampleData.profit,
                        backgroundColor: colors.gradients.profit,
                        borderColor: colors.gradients.profit.replace('0.8', '1'),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'L·ª£i nhu·∫≠n (t·ª∑ VNƒê)' }
                        },
                        x: {
                            title: { display: true, text: 'NƒÉm' }
                        }
                    }
                }
            });
            console.log('‚úÖ Profit chart created');
        }

        // 5. Revenue Only Chart
        function createRevenueChart() {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sampleData.years,
                    datasets: [{
                        label: 'Doanh thu (t·ª∑ VNƒê)',
                        data: sampleData.revenue,
                        borderColor: colors.gradients.revenue,
                        backgroundColor: colors.gradients.revenue.replace('0.8', '0.3'),
                        tension: 0.4,
                        fill: true,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Doanh thu (t·ª∑ VNƒê)' }
                        },
                        x: {
                            title: { display: true, text: 'NƒÉm' }
                        }
                    }
                }
            });
            console.log('‚úÖ Revenue chart created');
        }

        // Initialize all charts when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            console.log('üéØ DOM ready, creating charts...');

            try {
                createEconomicZoneChart();
                createCompanySizeChart();
                createRevenueProfileChart();
                createProfitChart();
                createRevenueChart();

                console.log('üéâ All charts created successfully!');
            } catch (error) {
                console.error('‚ùå Error creating charts:', error);
            }
        });
    </script>
</body>

</html>
